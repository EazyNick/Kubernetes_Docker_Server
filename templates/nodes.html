<!-- 노드 관리 페이지 - 클러스터 노드의 상태와 리소스 사용률을 모니터링하는 페이지 -->
{% extends "base.html" %}
{% block title %}노드 - 컨테이너 모니터링{% endblock %}
{% block breadcrumb %}노드{% endblock %}
{% block content %}

<!-- 노드 개요 메트릭 카드 섹션 -->
<div class="metric-grid mb-4">
    <div class="metric-card">
        <div class="metric-card-header">
            <div class="metric-icon success">
                <i class="fas fa-server"></i>
            </div>
        </div>
        <div class="metric-value" id="healthyNodes">11</div>
        <div class="metric-label">정상 노드</div>
        <div class="metric-change positive">
            <i class="fas fa-arrow-up"></i>
            91.7%
        </div>
    </div>
    <div class="metric-card">
        <div class="metric-card-header">
            <div class="metric-icon warning">
                <i class="fas fa-exclamation-triangle"></i>
            </div>
        </div>
        <div class="metric-value" id="warningNodes">1</div>
        <div class="metric-label">주의 노드</div>
        <div class="metric-change negative">
            <i class="fas fa-arrow-up"></i>
            8.3%
        </div>
    </div>
    <div class="metric-card">
        <div class="metric-card-header">
            <div class="metric-icon primary">
                <i class="fas fa-microchip"></i>
            </div>
        </div>
        <div class="metric-value" id="totalCores">96</div>
        <div class="metric-label">총 CPU 코어</div>
        <div class="metric-change">
            <i class="fas fa-minus"></i>
            변화 없음
        </div>
    </div>
    <div class="metric-card">
        <div class="metric-card-header">
            <div class="metric-icon info">
                <i class="fas fa-memory"></i>
            </div>
        </div>
        <div class="metric-value" id="totalMemory">384GB</div>
        <div class="metric-label">총 메모리</div>
        <div class="metric-change">
            <i class="fas fa-minus"></i>
            변화 없음
        </div>
    </div>
</div>

<!-- 노드 목록 테이블 섹션 -->
<div class="row">
    <div class="col-12">
        <div class="dashboard-card">
            <div class="dashboard-card-header">
                <div class="dashboard-card-title">
                    <i class="fas fa-server"></i>
                    클러스터 노드 목록
                </div>
                <div class="dashboard-card-subtitle">모든 노드의 상세 정보 및 상태</div>
            </div>
            <div class="dashboard-card-body">
                <div class="table-container">
                    <table id="nodesTable" class="table table-hover">
                        <thead>
                            <tr>
                                <th>노드명</th>
                                <th>상태</th>
                                <th>역할</th>
                                <th>CPU</th>
                                <th>메모리</th>
                                <th>디스크</th>
                                <th>컨테이너 수</th>
                                <th>업타임</th>
                                <th>액션</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-crown me-2 text-warning"></i>
                                        <div>
                                            <strong>k8s-master-01</strong>
                                            <div class="small text-muted">10.0.1.10</div>
                                        </div>
                                    </div>
                                </td>
                                <td><span class="status-badge running"><span class="status-indicator"></span>Ready</span></td>
                                <td><span class="badge bg-primary">Master</span></td>
                                <td>
                                    <div class="small">4 cores</div>
                                    <div class="progress-modern mb-1">
                                        <div class="progress-bar-modern" style="width: 23%; background: var(--success-color);"></div>
                                    </div>
                                    <div class="small text-muted">23%</div>
                                </td>
                                <td>
                                    <div class="small">16 GB</div>
                                    <div class="progress-modern mb-1">
                                        <div class="progress-bar-modern" style="width: 45%; background: var(--warning-color);"></div>
                                    </div>
                                    <div class="small text-muted">7.2 GB</div>
                                </td>
                                <td>
                                    <div class="small">100 GB</div>
                                    <div class="progress-modern mb-1">
                                        <div class="progress-bar-modern" style="width: 67%; background: var(--info-color);"></div>
                                    </div>
                                    <div class="small text-muted">67 GB</div>
                                </td>
                                <td>15</td>
                                <td>27d 14h</td>
                                <td>
                                    <div class="btn-group-actions">
                                        <button class="btn btn-sm btn-outline-primary" title="노드 상세">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline-secondary" title="SSH 접속">
                                            <i class="fas fa-terminal"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-server me-2 text-primary"></i>
                                        <div>
                                            <strong>k8s-worker-01</strong>
                                            <div class="small text-muted">10.0.1.11</div>
                                        </div>
                                    </div>
                                </td>
                                <td><span class="status-badge running"><span class="status-indicator"></span>Ready</span></td>
                                <td><span class="badge bg-info">Worker</span></td>
                                <td>
                                    <div class="small">8 cores</div>
                                    <div class="progress-modern mb-1">
                                        <div class="progress-bar-modern" style="width: 67%; background: var(--warning-color);"></div>
                                    </div>
                                    <div class="small text-muted">67%</div>
                                </td>
                                <td>
                                    <div class="small">32 GB</div>
                                    <div class="progress-modern mb-1">
                                        <div class="progress-bar-modern" style="width: 78%; background: var(--danger-color);"></div>
                                    </div>
                                    <div class="small text-muted">25 GB</div>
                                </td>
                                <td>
                                    <div class="small">200 GB</div>
                                    <div class="progress-modern mb-1">
                                        <div class="progress-bar-modern" style="width: 45%; background: var(--success-color);"></div>
                                    </div>
                                    <div class="small text-muted">90 GB</div>
                                </td>
                                <td>42</td>
                                <td>25d 8h</td>
                                <td>
                                    <div class="btn-group-actions">
                                        <button class="btn btn-sm btn-outline-primary" title="노드 상세">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline-secondary" title="SSH 접속">
                                            <i class="fas fa-terminal"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-server me-2 text-primary"></i>
                                        <div>
                                            <strong>k8s-worker-02</strong>
                                            <div class="small text-muted">10.0.1.12</div>
                                        </div>
                                    </div>
                                </td>
                                <td><span class="status-badge warning"><span class="status-indicator"></span>Warning</span></td>
                                <td><span class="badge bg-info">Worker</span></td>
                                <td>
                                    <div class="small">8 cores</div>
                                    <div class="progress-modern mb-1">
                                        <div class="progress-bar-modern" style="width: 89%; background: var(--danger-color);"></div>
                                    </div>
                                    <div class="small text-muted">89%</div>
                                </td>
                                <td>
                                    <div class="small">32 GB</div>
                                    <div class="progress-modern mb-1">
                                        <div class="progress-bar-modern" style="width: 91%; background: var(--danger-color);"></div>
                                    </div>
                                    <div class="small text-muted">29.1 GB</div>
                                </td>
                                <td>
                                    <div class="small">200 GB</div>
                                    <div class="progress-modern mb-1">
                                        <div class="progress-bar-modern" style="width: 23%; background: var(--success-color);"></div>
                                    </div>
                                    <div class="small text-muted">46 GB</div>
                                </td>
                                <td>38</td>
                                <td>20d 3h</td>
                                <td>
                                    <div class="btn-group-actions">
                                        <button class="btn btn-sm btn-outline-primary" title="노드 상세">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline-secondary" title="SSH 접속">
                                            <i class="fas fa-terminal"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <i class="fab fa-docker me-2 text-info"></i>
                                        <div>
                                            <strong>docker-host-01</strong>
                                            <div class="small text-muted">10.0.2.10</div>
                                        </div>
                                    </div>
                                </td>
                                <td><span class="status-badge running"><span class="status-indicator"></span>Ready</span></td>
                                <td><span class="badge bg-secondary">Docker</span></td>
                                <td>
                                    <div class="small">16 cores</div>
                                    <div class="progress-modern mb-1">
                                        <div class="progress-bar-modern" style="width: 34%; background: var(--success-color);"></div>
                                    </div>
                                    <div class="small text-muted">34%</div>
                                </td>
                                <td>
                                    <div class="small">64 GB</div>
                                    <div class="progress-modern mb-1">
                                        <div class="progress-bar-modern" style="width: 56%; background: var(--warning-color);"></div>
                                    </div>
                                    <div class="small text-muted">35.8 GB</div>
                                </td>
                                <td>
                                    <div class="small">500 GB</div>
                                    <div class="progress-modern mb-1">
                                        <div class="progress-bar-modern" style="width: 78%; background: var(--info-color);"></div>
                                    </div>
                                    <div class="small text-muted">390 GB</div>
                                </td>
                                <td>52</td>
                                <td>45d 12h</td>
                                <td>
                                    <div class="btn-group-actions">
                                        <button class="btn btn-sm btn-outline-primary" title="노드 상세">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline-secondary" title="SSH 접속">
                                            <i class="fas fa-terminal"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 노드 리소스 사용률 차트 섹션 -->
<div class="row mt-4">
    <div class="col-lg-6">
        <div class="dashboard-card">
            <div class="dashboard-card-header">
                <div class="dashboard-card-title">
                    <i class="fas fa-chart-bar"></i>
                    노드별 CPU 사용률
                </div>
            </div>
            <div class="dashboard-card-body">
                <div class="chart-container chart-container-small">
                    <canvas id="nodeCpuChart"></canvas>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-6">
        <div class="dashboard-card">
            <div class="dashboard-card-header">
                <div class="dashboard-card-title">
                    <i class="fas fa-chart-bar"></i>
                    노드별 메모리 사용률
                </div>
            </div>
            <div class="dashboard-card-body">
                <div class="chart-container chart-container-small">
                    <canvas id="nodeMemoryChart"></canvas>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}