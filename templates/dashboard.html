{% extends "base.html" %} {% block title %}대시보드 - 컨테이너 모니터링{%
endblock %} {% block breadcrumb %}대시보드{% endblock %} {% block content %}
<!-- 메트릭 카드들 -->
<div class="metric-grid">
  <div class="metric-card">
    <div class="metric-card-header">
      <div class="metric-icon primary">
        <i class="fas fa-cubes"></i>
      </div>
    </div>
    <div class="metric-value" id="totalContainers">147</div>
    <div class="metric-label">전체 컨테이너</div>
    <div class="metric-change positive">
      <i class="fas fa-arrow-up"></i>
      <span>+3.2%</span>
    </div>
  </div>

  <div class="metric-card">
    <div class="metric-card-header">
      <div class="metric-icon success">
        <i class="fas fa-play-circle"></i>
      </div>
    </div>
    <div class="metric-value" id="runningContainers">134</div>
    <div class="metric-label">실행 중</div>
    <div class="metric-change positive">
      <i class="fas fa-arrow-up"></i>
      <span>+1.8%</span>
    </div>
  </div>

  <div class="metric-card">
    <div class="metric-card-header">
      <div class="metric-icon warning">
        <i class="fas fa-pause-circle"></i>
      </div>
    </div>
    <div class="metric-value" id="stoppedContainers">8</div>
    <div class="metric-label">중지됨</div>
    <div class="metric-change negative">
      <i class="fas fa-arrow-down"></i>
      <span>-0.5%</span>
    </div>
  </div>

  <div class="metric-card">
    <div class="metric-card-header">
      <div class="metric-icon danger">
        <i class="fas fa-exclamation-circle"></i>
      </div>
    </div>
    <div class="metric-value" id="failedContainers">5</div>
    <div class="metric-label">실패</div>
    <div class="metric-change negative">
      <i class="fas fa-arrow-up"></i>
      <span>+0.2%</span>
    </div>
  </div>
</div>

<!-- 차트 섹션 -->
<div class="row">
  <!-- CPU 추이 차트 -->
  <div class="col-lg-6 mb-4">
    <div class="dashboard-card">
      <div class="dashboard-card-header">
        <h5 class="dashboard-card-title">
          <i class="fas fa-microchip"></i>
          CPU 사용률 추이
        </h5>
        <p class="dashboard-card-subtitle">최근 2시간 CPU 사용률</p>
      </div>
      <div class="dashboard-card-body">
        <div class="chart-container">
          <canvas id="cpuTrendChart"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- 메모리 추이 차트 -->
  <div class="col-lg-6 mb-4">
    <div class="dashboard-card">
      <div class="dashboard-card-header">
        <h5 class="dashboard-card-title">
          <i class="fas fa-memory"></i>
          메모리 사용률 추이
        </h5>
        <p class="dashboard-card-subtitle">최근 2시간 메모리 사용률</p>
      </div>
      <div class="dashboard-card-body">
        <div class="chart-container">
          <canvas id="memoryTrendChart"></canvas>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- 노드 및 엔진 분포 -->
<div class="row">
  <!-- 노드 분포 차트 -->
  <div class="col-lg-6 mb-4">
    <div class="dashboard-card">
      <div class="dashboard-card-header">
        <h5 class="dashboard-card-title">
          <i class="fas fa-server"></i>
          노드별 컨테이너 분포
        </h5>
        <p class="dashboard-card-subtitle">각 노드의 컨테이너 수</p>
      </div>
      <div class="dashboard-card-body">
        <div class="chart-container">
          <canvas id="nodeDistributionChart"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- 엔진 분포 차트 -->
  <div class="col-lg-6 mb-4">
    <div class="dashboard-card">
      <div class="dashboard-card-header">
        <h5 class="dashboard-card-title">
          <i class="fas fa-cogs"></i>
          컨테이너 엔진 분포
        </h5>
        <p class="dashboard-card-subtitle">사용 중인 컨테이너 엔진</p>
      </div>
      <div class="dashboard-card-body">
        <div class="chart-container">
          <canvas id="engineChart"></canvas>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- 클러스터 상태 및 알림 -->
<div class="row">
  <!-- 클러스터 상태 -->
  <div class="col-lg-8 mb-4">
    <div class="dashboard-card">
      <div class="dashboard-card-header">
        <h5 class="dashboard-card-title">
          <i class="fas fa-cluster"></i>
          클러스터 상태
        </h5>
        <p class="dashboard-card-subtitle">전체 클러스터의 현재 상태</p>
      </div>
      <div class="dashboard-card-body">
        <div class="cluster-health">
          <div class="metric-card">
            <div class="metric-card-header">
              <div class="metric-icon success">
                <i class="fas fa-server"></i>
              </div>
            </div>
            <div class="metric-value" id="totalNodes">12</div>
            <div class="metric-label">활성 노드</div>
            <div class="metric-change positive">
              <i class="fas fa-check"></i>
              <span>정상</span>
            </div>
          </div>

          <div class="metric-card">
            <div class="metric-card-header">
              <div class="metric-icon primary">
                <i class="fas fa-microchip"></i>
              </div>
            </div>
            <div class="metric-value" id="avgCpu">34.7%</div>
            <div class="metric-label">평균 CPU</div>
            <div class="metric-change positive">
              <i class="fas fa-arrow-down"></i>
              <span>-2.1%</span>
            </div>
          </div>

          <div class="metric-card">
            <div class="metric-card-header">
              <div class="metric-icon warning">
                <i class="fas fa-memory"></i>
              </div>
            </div>
            <div class="metric-value">68.2%</div>
            <div class="metric-label">평균 메모리</div>
            <div class="metric-change positive">
              <i class="fas fa-arrow-down"></i>
              <span>-1.3%</span>
            </div>
          </div>

          <div class="metric-card">
            <div class="metric-card-header">
              <div class="metric-icon info">
                <i class="fas fa-hdd"></i>
              </div>
            </div>
            <div class="metric-value">45.8%</div>
            <div class="metric-label">평균 디스크</div>
            <div class="metric-change negative">
              <i class="fas fa-arrow-up"></i>
              <span>+0.8%</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 최근 알림 -->
  <div class="col-lg-4 mb-4">
    <div class="dashboard-card">
      <div class="dashboard-card-header">
        <h5 class="dashboard-card-title">
          <i class="fas fa-bell"></i>
          최근 알림
        </h5>
        <p class="dashboard-card-subtitle">시스템 알림 및 경고</p>
      </div>
      <div class="dashboard-card-body">
        <div class="alert-item">
          <div class="d-flex justify-content-between align-items-start">
            <div>
              <strong>CPU 사용률 높음</strong>
              <p class="mb-1 text-muted small">
                k8s-worker-02 노드의 CPU 사용률이 85%를 초과했습니다.
              </p>
              <small class="text-muted">2분 전</small>
            </div>
            <span class="status-badge warning">경고</span>
          </div>
        </div>

        <div class="alert-item info">
          <div class="d-flex justify-content-between align-items-start">
            <div>
              <strong>새 컨테이너 배포</strong>
              <p class="mb-1 text-muted small">
                nginx-web-3 컨테이너가 성공적으로 배포되었습니다.
              </p>
              <small class="text-muted">5분 전</small>
            </div>
            <span class="status-badge running">정보</span>
          </div>
        </div>

        <div class="alert-item">
          <div class="d-flex justify-content-between align-items-start">
            <div>
              <strong>메모리 사용률 증가</strong>
              <p class="mb-1 text-muted small">
                전체 클러스터의 메모리 사용률이 평소보다 높습니다.
              </p>
              <small class="text-muted">10분 전</small>
            </div>
            <span class="status-badge warning">경고</span>
          </div>
        </div>

        <div class="alert-item critical">
          <div class="d-flex justify-content-between align-items-start">
            <div>
              <strong>컨테이너 실패</strong>
              <p class="mb-1 text-muted small">
                redis-cache-1 컨테이너가 예기치 않게 종료되었습니다.
              </p>
              <small class="text-muted">15분 전</small>
            </div>
            <span class="status-badge stopped">위험</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
